{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction ProductUpdateComponent_div_10_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"campo obrigatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductUpdateComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ProductUpdateComponent_div_10_p_1_Template, 2, 0, \"p\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.name.errors == null ? null : ctx_r1.name.errors[\"required\"]);\n  }\n}\nfunction ProductUpdateComponent_div_15_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"campo obrigatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductUpdateComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ProductUpdateComponent_div_15_p_1_Template, 2, 0, \"p\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.price.errors == null ? null : ctx_r2.price.errors[\"required\"]);\n  }\n}\nexport class ProductUpdateComponent {\n  constructor(_productService, _router, _formBuilder, _route) {\n    this._productService = _productService;\n    this._router = _router;\n    this._formBuilder = _formBuilder;\n    this._route = _route;\n  }\n  ngOnInit() {\n    this._createForm(this.product);\n    this._getProduct();\n  }\n  updateProduct() {\n    if (this.form.invalid) {\n      return;\n    }\n    this._productService.update(this.form.value).subscribe(() => {\n      this.cancel();\n    });\n  }\n  cancel() {\n    this._router.navigate(['/products']);\n  }\n  get name() {\n    return this.form.get('name');\n  }\n  get price() {\n    return this.form.get('price');\n  }\n  /*************** METHODS PRIVATE ***************/\n  _createForm(product) {\n    this.product = product;\n    this.form = this._formBuilder.group({\n      id: [this.product ? this.product?.id : null],\n      name: [this.product ? this.product?.name : null],\n      price: [this.product ? this.product?.price : null]\n    });\n    console.log(this.form.value);\n  }\n  _getProduct() {\n    let id = this._route.snapshot.paramMap.get(\"id\");\n    this._productService.readById(Number(id)).subscribe(product => {\n      this.product = product;\n      this._createForm(this.product);\n    });\n  }\n  static #_ = this.ɵfac = function ProductUpdateComponent_Factory(t) {\n    return new (t || ProductUpdateComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductUpdateComponent,\n    selectors: [[\"app-product-update\"]],\n    decls: 20,\n    vars: 3,\n    consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"formGroup\"], [\"formDir\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"name\"], [\"formControlName\", \"name\", \"id\", \"prodNome\", \"placeholder\", \"produto\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"validation-error\", 4, \"ngIf\"], [\"for\", \"price\"], [\"formControlName\", \"price\", \"id\", \"prodPreco\", \"placeholder\", \"9.99\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mr-2\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"validation-error\"], [4, \"ngIf\"]],\n    template: function ProductUpdateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Atualizar Produto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\", 3, 4)(6, \"div\", 5)(7, \"label\", 6);\n        i0.ɵɵtext(8, \"Nome do Produto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ProductUpdateComponent_div_10_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 9);\n        i0.ɵɵtext(13, \"Preco\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, ProductUpdateComponent_div_15_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementStart(16, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function ProductUpdateComponent_Template_button_click_16_listener() {\n          return ctx.updateProduct();\n        });\n        i0.ɵɵtext(17, \"Atualizar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function ProductUpdateComponent_Template_button_click_18_listener() {\n          return ctx.cancel();\n        });\n        i0.ɵɵtext(19, \"Cancel\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.name.invalid && _r0.submitted);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.price.invalid && _r0.submitted);\n      }\n    },\n    dependencies: [i4.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.FormGroupDirective, i3.FormControlName],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","ProductUpdateComponent_div_10_p_1_Template","ɵɵadvance","ɵɵproperty","ctx_r1","name","errors","ProductUpdateComponent_div_15_p_1_Template","ctx_r2","price","ProductUpdateComponent","constructor","_productService","_router","_formBuilder","_route","ngOnInit","_createForm","product","_getProduct","updateProduct","form","invalid","update","value","subscribe","cancel","navigate","get","group","id","console","log","snapshot","paramMap","readById","Number","_","ɵɵdirectiveInject","i1","ProductService","i2","Router","i3","FormBuilder","ActivatedRoute","_2","selectors","decls","vars","consts","template","ProductUpdateComponent_Template","rf","ctx","ɵɵelement","ProductUpdateComponent_div_10_Template","ProductUpdateComponent_div_15_Template","ɵɵlistener","ProductUpdateComponent_Template_button_click_16_listener","ProductUpdateComponent_Template_button_click_18_listener","_r0","submitted"],"sources":["C:\\Users\\johnl\\OneDrive\\Documentos\\Workspace\\angular-crud\\src\\app\\components\\products\\product-update\\product-update.component.ts","C:\\Users\\johnl\\OneDrive\\Documentos\\Workspace\\angular-crud\\src\\app\\components\\products\\product-update\\product-update.component.html"],"sourcesContent":["import { Product } from './../product.model';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { ProductService } from '../product.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-product-update',\r\n  templateUrl: './product-update.component.html',\r\n  styleUrls: ['./product-update.component.css']\r\n})\r\nexport class ProductUpdateComponent implements OnInit {\r\n\r\n  public form!: FormGroup;\r\n  public product!: Product;\r\n\r\n  constructor(\r\n    private _productService: ProductService,\r\n    private _router: Router,\r\n    private _formBuilder: FormBuilder,\r\n    private _route: ActivatedRoute,\r\n  ) {\r\n    \r\n  }\r\n  ngOnInit(): void {\r\n    this._createForm(this.product)\r\n    this._getProduct();\r\n  }\r\n  \r\n  public updateProduct(): void {\r\n\r\n    if(this.form.invalid){\r\n      return\r\n    }\r\n    this._productService.update(this.form.value).subscribe(() => {\r\n      this.cancel()\r\n    })\r\n  }\r\n  public cancel(): void {\r\n    this._router.navigate(['/products'])\r\n  }\r\n\r\n  get name() {\r\n    return this.form.get('name')!;\r\n  }\r\n\r\n  get price() {\r\n    return this.form.get('price')!;\r\n  }\r\n  /*************** METHODS PRIVATE ***************/\r\n  \r\n  private _createForm(product: Product): void {\r\n    this.product = product\r\n    this.form = this._formBuilder.group({\r\n       id: [this.product ? this.product?.id : null],\r\n       name: [this.product ? this.product?.name : null],\r\n       price: [this.product ? this.product?.price : null]\r\n    });\r\n    console.log(this.form.value)\r\n  }\r\n\r\n  private _getProduct(): void {\r\n    let id = this._route.snapshot.paramMap.get(\"id\")\r\n    this._productService.readById(Number(id)).subscribe(product => {\r\n      this.product = product\r\n      this._createForm(this.product)\r\n    });\r\n  }\r\n}","<div class=\"card\">\r\n  <div class=\"card-header\">Atualizar Produto</div>\r\n  <div class=\"card-body\">\r\n    <form [formGroup]=\"form\" #formDir=\"ngForm\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Nome do Produto</label>\r\n        <input class=\"form-control\" formControlName=\"name\" id=\"prodNome\" placeholder=\"produto\" required>\r\n      </div>\r\n      <div *ngIf=\"name.invalid && formDir.submitted\" class=\"validation-error\">\r\n        <p *ngIf=\"name.errors?.['required']\">campo obrigatorio</p>\r\n      </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"price\">Preco</label>\r\n          <input class=\"form-control\" formControlName=\"price\" id=\"prodPreco\" placeholder=\"9.99\" required>\r\n        </div>\r\n        <div *ngIf=\"price.invalid && formDir.submitted\" class=\"validation-error\">\r\n          <p *ngIf=\"price.errors?.['required']\">campo obrigatorio</p>\r\n        </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary mr-2\" (click)=\"updateProduct()\">Atualizar</button>\r\n      <button type=\"button\" class=\"btn btn-secondary\" (click)=cancel()>Cancel</button>\r\n    </form>\r\n  </div>\r\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}